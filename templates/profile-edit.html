<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Profile</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" 
        rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet"
         href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
         <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        

    </head>
    <body>
    <div style="height: 100%; width: 100%">
        <header>
            <h2 class="logo">LOGO</h2>
             <nav class="navigation">
                <a href="{{ url_for('home') }}" class="navigation-link">Home</a>
                <a href="{{ url_for('devices') }}" class="navigation-link logged-in">Devices</a>
                <a href="{{ url_for('currentWeather') }}" class="navigation-link">Current Weather</a>
                <a href="{{ url_for('monthlyWeather') }}" class="navigation-link">Monthly Weather</a>
                <a href="{{ url_for('registration') }}" class="navigation-link logged-out">Registration</a>
                <a href="{{ url_for('loginPage') }}" class="navigation-link logged-out">Login</a>
                <a href="{{ url_for('profile') }}" class="navigation-link logged-in">Profile</a>
                <a href="{{ url_for('logout') }}" class="navigation-link logged-in" onclick="logoutUser()">Logout</a>
            </nav>
            <div class="bx bx-menu" id="menu-icon"></div>
        </header>
         <div class="currentWeatherDIV">
            <div class="profile-holder">
                <div class="profile-navbar">
                    <ul>
                        <li class="admin-page">
                            <div class="navbarDiv">
                                <a href="{{ url_for('userList') }}">All users</a>
                            </div>
                        </li>
                        <li>
                            <div class="navbarDiv">
                                <a href="#" onclick="fetchUserIdAndDelete()">Delete Account</a>
                            </div>
                        </li>

                    </ul>
                    <i class="ri-arrow-left-circle-line" id="profile-navbar-arrow"></i>
                </div>
                <div class="profile-settings">
                    <div class="profile-flex-div">
                        <div class="basic-information-div">

                                <div class="basic-information-text-div">Basic info</div>
                                <div class="info-div">
                                    <a class="info-a-placeholderUser" id="fullName">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span>Name</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="fullNameSpan"></span>
                                                        <input type="text" placeholder="Insert name" class="input-profile" id="name-input">

                                                    </div>

                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>

                                    </a>
                                </div>
                                <div class="info-div">
                                    <a class="info-a-placeholderUser" id="date_of_birth">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span >Birthdate</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="birthdateSpan"></span>
                                                        <input type="text" placeholder="Insert birthdate" class="input-profile" id="date-input">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>

                                    </a>
                                </div>
                                <div class="info-div">
                                    <a class="info-a-placeholderUser" id="gender">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span>Gender</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="genderSpan"></span>
                                                        <input type="text" placeholder="Insert gender" class="input-profile" id="gender-input">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>

                                    </a>
                                </div>

                        </div>
                        <div class="basic-information-div">

                                <div class="basic-information-text-div">Contact</div>
                                <div class="info-div">
                                    <a class="info-a-placeholderUser" id="email">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span>E-mail</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="emailSpan"></span>
                                                        <input type="text" placeholder="Insert email" class="input-profile" id="email-input">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>

                                    </a>
                                </div>
                                <div class="info-div">
                                    <a class="info-a-placeholderUser" id="phoneNumber">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span>Phonenumber</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="phonenumberSpan"></span>
                                                        <input type="text" placeholder="Insert phonenumber" class="input-profile" id="phone-input">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>

                                    </a>
                                </div>

                        </div>
                        <div class="basic-information-div">

                                <div class="basic-information-text-div">Adresses</div>
                                <div class="info-div">
                                    <a class="info-a-placeholderAddress" id="city">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span>City</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="citySpan"></span>
                                                        <input type="text" placeholder="Insert city" class="input-profile" id="city-input">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>

                                    </a>
                                </div>
                                <div class="info-div">
                                    <a class="info-a-placeholderAddress" id="street">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span>Street</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="streetSpan"></span>
                                                        <input type="text" placeholder="Insert street" class="input-profile" id="street-input">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>

                                    </a>
                                </div>
                                <div class="info-div">
                                    <a class="info-a-placeholderAddress" id="postCode">
                                        <div class="basic-info-placeholder">
                                            <div class="actual-info-placeholder">
                                                <div class="flex-info-placeholder">
                                                    <div class="sign-div">
                                                        <span>Postcode</span>
                                                    </div>
                                                    <div class="info-data-div">
                                                        <span id="postcodeSpan"></span>
                                                        <input type="text" placeholder="Insert post code" class="input-profile" id="postC-input">
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="info-arrow-placeHolder">
                                                <i class='bx bxs-right-arrow'></i>
                                            </div>
                                        </div>
                                       
                                    </a>
                                </div>
                          
                        </div>
                        <div class="contact-info-div">

                        </div>
                        <div class="devices-div">

                        </div>
                        <div class="adresses-div">

                        </div>
                    </div>
                </div>

            </div>
         <footer class="site-footer">
                    <hr style="margin-top: 20px; margin-bottom: 20px;">
                    <div class="footer-content">
                        <div class="footer-logo">
                            <img src="path-to-your-logo.png" alt="Logo" />
                        </div>
                        <div class="footer-about">
                            <p></p>
                        </div>
                        <div class="footer-links-div">
                            <div class="footer-links">
                                <ul>
                                    <li><a href="/about">About Us</a></li>
                                    <li><a href="/contact">Contact</a></li>
                                    <li><a href="/privacy-policy">Privacy Policy</a></li>
                                    <li><a href="/terms">Terms of Service</a></li>
                                </ul>
                            </div>
                            <div class="footer-social">
                                <a href="http://www.facebook.com">Facebook</a>
                                <a href="http://www.twitter.com">Twitter</a>
                                <a href="http://www.instagram.com">Instagram</a>
                            </div>
                        </div>
                    </div>
                </footer>
        </div>
    </div>
       <script src="{{ url_for('static', filename='js/index.js') }}"></script>
        <script>
            async function getLoggedInUser() {
                try {
                    const response = await fetch('http://127.0.0.1:5000/getLoggedInUser', {
                        method: 'GET',
                        credentials: 'include'
                    });

                    if (!response.ok) {
                        throw new Error('Network response was not ok.');
                    }

                    const data = await response.json();            

                    const userInfo = data.user;

                    const email = userInfo.email;
                    const fullName = userInfo.fullName;
                    const date_of_birth = userInfo.date_of_birth;
                    const gender = userInfo.gender;
                    const phoneNumber = userInfo.phoneNumber;
                    const street = userInfo.street;
                    const city = userInfo.city;
                    const postCode = userInfo.postCode;

                    // Update the HTML elements with the retrieved data
                    document.getElementById('fullNameSpan').innerHTML = fullName;
                    document.getElementById('emailSpan').innerHTML = email;
                    document.getElementById('birthdateSpan').innerHTML = date_of_birth;
                    document.getElementById('genderSpan').innerHTML = gender;
                    document.getElementById('phonenumberSpan').innerHTML = phoneNumber;
                    document.getElementById('streetSpan').innerHTML = street;
                    document.getElementById('citySpan').innerHTML = city;
                    document.getElementById('postcodeSpan').innerHTML = postCode;
                } catch (error) {
                    console.error('Error:', error);
                    // Handle errors here, e.g., show an error message to the user
                }
        }
        getLoggedInUser()
        </script>
    </body>
   
</html>